<link rel="import" href="/bower_components/polymer/polymer-element.html">
<link rel="import" href="/bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="/bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="/bower_components/paper-item/paper-item.html">

<dom-module id="sapo-poor-selector">

  <template>

    <style>

      :host {
        display: flex;
        flex-direction: column;
      }

      select {
        width: 200px;
      }
    </style>

    <select>
      <template is="dom-repeat" items="[[data]]">
        <option value="[[item.identity]]">[[item.text]]</option>
      </template>
    </select>

  </template>

  <script>
    class SapoPoorSelector extends Polymer.Element {

      static get is() { return 'sapo-poor-selector'; }

      static get properties() {
        return {
          label: String,
          data: {
            type: Array,
            observer: '_dataChanged'
          },
          selected: {
            type: Number,
            notify: true,
            observer: '_selectedChanged'
          },
          disabled: Boolean,
          noFun: Boolean
        }
      }

      _isDisabled(data, disabled) {
        return data.length === 0 || disabled;
      }

      _dataChanged(newData) {
        this.selected = 0;
      }

      _selectedChanged(newValue) {
        this.dispatchEvent(new CustomEvent('select', {detail: {id: this.selected}}));
      }

    }

    window.customElements.define(SapoPoorSelector.is, SapoPoorSelector);
  </script>
</dom-module>
