<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/iron-icons/image-icons.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../elements/sapo-item-crud.html">

<dom-module id="sapo-list-criterios-legais">

  <template>

    <style>

      :host {
        display: flex;
        flex-direction: column;
        width: 100%;
      }

      .green {
        background: #5cb85c;
      }

      .teal {
        background: var(--paper-teal-a700);
      }

      paper-listbox {
        --paper-listbox-background-color: lightgray;

        --sapo-item-crud-default-weight: normal;
        --sapo-item-crud-default-background: white;

        height: 250px;
        padding: 0px;
        overflow: auto;
      }

      sapo-item-crud {
        outline: 0;
      }

      paper-button {
        margin: 5px auto 5px 0px;
        color: white;
      }

      paper-button[disabled] {
        background: #eaeaea;
        color: #a8a8a8;
      }

    </style>

    <paper-button raised on-click="_addClicked" disabled="[[disabled]]" class="teal"><iron-icon icon="image:add-to-photos"></iron-icon>Adicionar</paper-button>

    <paper-listbox>
      <template is="dom-repeat" items="[[data]]">
        <sapo-item-crud text="[[_computeText(item.norma.nome, item.descricao)]]" identity="[[item.id]]" on-delete="_deleteClicked" uneditable></sapo-item-crud>
      </template>
    </paper-listbox>

  </template>

  <script>
    class SapoListCriteriosLegais extends Polymer.Element {

      static get is() { return 'sapo-list-criterios-legais'; }

      static get properties() {
        return {
          data: {
            type: Array,
            observer: '_dataChanged'
          },

          disabled: {
            type: Boolean,
            value: true
          }
        }
      }

      _dataChanged(newData) {
        this.selected = 0;
      }

      _addClicked() {
        this.dispatchEvent(new CustomEvent('add'));
      }

      _deleteClicked(e) {
        this.dispatchEvent(new CustomEvent('delete', {detail: e.detail}));
      }

      _computeText(norma, criterioLegal) {
        return norma + " - " + criterioLegal;
      }

    }

    window.customElements.define(SapoListCriteriosLegais.is, SapoListCriteriosLegais);
  </script>
</dom-module>
